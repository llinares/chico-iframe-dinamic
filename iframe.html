<html>
<head>
<title>Probando modales</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link href="http://static.mlstatic.com/org-img/ch/ui/0.10.7/chico.min.css" type="text/css" rel="stylesheet"/>
</head>

<body style="width: 100%; padding: 0; min-width: 0;">

<h1>Soy un iframe que envia Mensajes</h1>
<p>Clickeando en los links para editar el modal que abriste en la ventana padre</p>
<hr />

<p><a href="javascript:void(0)" id="closeModal">Cerrar modal</a></p>
<p><a href="javascript:void(0)" id="deleteButton">Borrar Cruz</a></p>
<p><a href="javascript:void(0)" id="deleteLoading">Borrar Loading</a></p>
<p><a href="javascript:void(0)" id="addLoading">Agregar Loading</a></p>
<p><a href="javascript:void(0)" id="resizeFx">Resizearme con animacion</a></p>
<p><a href="javascript:void(0)" id="resize">Resizearme sin animacion</a></p>


<script>

	var iframeMessenger = (function(){

		var parentUrl = (function(){
				var regex = /parent_url=([^&]*)/g;
				var result = regex.exec(document.location.search);
				var parentUrl = null;
				if(result != null && result.length == 2){
					parentUrl = decodeURIComponent(result[1]);
				}
				return parentUrl;
		})(),

		post = function(message){

			if(parentUrl != null){

				window.parent.postMessage(message,parentUrl);

			}
		};

		return {
			post: post
		}

	})();


	/* Enviando un mensaje

    //Cerrar modal
	iframeMessenger.post("close");

	//Remover boton cerrar (cruz)
	iframeMessenger.post("remove=close");

	//Remover Loading
	iframeMessenger.post("remove=loading");

	//Agregar Loading
	iframeMessenger.post("add=loading");

	//Resizear con animacion (ancho, alto, animacion,velocidad)
	iframeMessenger.post("resize=330&250&true&1400");

	//Resizear sin animacion (ancho,alto)
	iframeMessenger.post("resize=400&300");

    */


	var closeModal = document.getElementById("closeModal");
	closeModal.onclick = function(){
		iframeMessenger.post("close");
	}

	var deleteButton = document.getElementById("deleteButton");
	deleteButton.onclick = function(){
		iframeMessenger.post("remove=close");
	}

	var deleteLoading = document.getElementById("deleteLoading");
	deleteLoading.onclick = function(){
		iframeMessenger.post("remove=loading");
	}

	var addLoading = document.getElementById("addLoading");
	addLoading.onclick = function(){
		iframeMessenger.post("add=loading");
	}

	var resizeFx = document.getElementById("resizeFx");
	resizeFx.onclick = function(){
		iframeMessenger.post("resize=330&250&true&1400");
	}

	var resize = document.getElementById("resize");
	resize.onclick = function(){
		iframeMessenger.post("resize=400&300");
	}

</script>
</body>

</html>